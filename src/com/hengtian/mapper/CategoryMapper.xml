<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hengtian.mapper.CategoryMapper">

	<select id="findAllCategory" resultMap="cateItemMap">
		SELECT ci.*,cs.cate_name FROM cateitems ci,categorys cs WHERE ci.category=cs.cate_id
	</select>
	
	<select id="findAllItems" resultType="com.hengtian.po.CateItem">
		SELECT id,itemName FROM cateitems
	</select>
	
	<insert id="insertProduct" parameterType="com.hengtian.po.Product">
		INSERT INTO 
		products(pro_id,pro_name,pro_desc,img,price,num,cateitem,userid) 
		VALUES(#{pro_id},#{pro_name},#{pro_desc},#{img},#{price},#{num},#{cateitem},#{userid})
	</insert>
	
	<select id="findProductById" parameterType="string" resultType="com.hengtian.po.Product">
		SELECT * FROM products WHERE pro_id=#{pro_id}
	</select>
	
	<select id="findAllProduct" resultType="com.hengtian.po.Product">
		SELECT * FROM products
	</select>
	
	<select id="findProductByUserId" parameterType="int" resultType="com.hengtian.po.Product">
		SELECT * FROM products WHERE userid=#{userid}
	</select>
	
	<resultMap type="com.hengtian.po.CateItemVo" id="cateItemMap">
		<!-- 配置主表信息映射 -->
		<result column="cate_name" property="cate_name"/>
		
		<!-- 配置一对多关联对象映射 -->
		<collection property="cateItems" ofType="com.hengtian.po.CateItem">
			<id column="id" property="id"/>
			<result column="itemName" property="itemName"/>
			<result column="category" property="category"/>
		</collection>
	</resultMap>
	
</mapper>